---
title: "14 февраля 2023"
author: "Малютин О.С."
date: "2023-02-14"
categories: [ежедневно, 2023 февраль, данные, ПСЧ]
image: "itog.png"
toc: true
---

# Ежедневный отчет

Вторник. Расчеты для Красноярска


```{mermaid}
gantt
    title Ход работы
    dateFormat HH:mm
    axisFormat %H:%M

    section 1. Общая работа
    Подведение итогов, планирование         :a1, 17:00, 30m

    section 1. Расчет Красноярск
    Окончательная сборка Датасета           :b1, 08:30, 1h
    Оформление карты Красноярска           :b2, after b1, 12:20
    Оформление расчетного ноутбука          :b3, 13:30, 14:00
    Проведение расчетов                     :b4, 14:00, 15:30
    Отладка кода ноутбуков                  :b5, 14:30, 15:15
    Визуализация результатов расчетов       :b6, after b4, 17:00
```


# Блок 1. Общая работа

## План на завтра

1. Оформить таблицу для заполнения на участников тренировки по учениям в Емельяново и направить для заполнения.
2. Начать писать отчет по расчету для Красноярска
3. Начать отчет по работе отдела за 2022 год
4. Изучить методические рекомендации по учениям Арктика 2023

# 2. Расчет Красноярск

## Оформление рабочего датасета

Получен итоговый датасет по пожарам в Красноярске за 2020-2022 годы. Пришлось изрядно потрудиться вытаскивая данные из текстового вида. Ход работы такой:

1. Сохранить данные из файлов `Word` в текстовый файл - без обработки, просто полностью вынести для последующей работы средствами Python
2. Сформировать DataFrame из сырых данных - просто разобрать данные из текстового файла по записям и сохранить в виде `csv`. Записями DataFrame являются записи о пожарах, столбцами - отдельные блоки информации, согласно разделению в исходном файле: 
    ![](1.png)
3. Произвести парсинг данных - выбрать из записей значимые для анализа данные. В данном случае, были выбраны следующие данные: 
    * дата пожара
    * район
    * адрес
    * координаты
    * район выезда
    * объект
    * площадь пожара
    * временные показатели
    * ранг пожара
    * погибло
    * пострадало
    * привлекалось человек
    * АЦ
    * АЛ
4. Изменить типы данных в соответствии с хранящейся информацией. Это требуется для удобства работы и уменьшения размера итогового файла
5. Обогатить данные. В данном случае нам дополнительно потребовались следующие сведения: `скорость следования пожарных подразделений`, `время следования подразделений`
6. Для более чем 100 записей не были указаны географические координаты, поэтому для них была произведена процедура геокодирования
7. В заключение был подготовлен файл `gpkg` 
8. Произведена окончательная очистка данных - были отброшены данные выходившие за пределы города Красноярска
    ![](fires_out_bounds_1.png)

Итоговый датасет составил 4112 записей о выездах на пожары и загорания. Это 66% от исходного набора. Прочие записи были утрачены в связи с невозможностью их интерпретации в связи с отсутствующими или испорченными данными в рассматриваемых фичах.

![](heatmap.png)

## Предварительные расчеты

Предварительные расчеты были произведены с использованием библиотеки FUDO полученной в ходе прошлогодней работы.

Для расчета использовался граф дорожной сети (ГДС) Красноярска.

Расчет проводился на основе известных данных о дислокации пожарных подразделений. Цель расчета -- определить наилучшие места размещения 5 новых пожарных подразделений.

Расчет производился для средней скорости следования `35 км/ч`. 

:::{.callout-note}
Требуется уточнить реальные средние скорости следования пожарных автомобилей в г. Красноярске.
:::

### Сравнение показателей до и после расчета

![](before_gr.png){#fig-before-gr}

![](after_gr.png){#fig-after-gr}

### Предварительный итог расчета

![](itog.png)

